Daily Laravel Course

22/10/25
    - Câu lệnh chạy dự án: 
        -> php artisan serve

    - Câu lệnh tạo controller
        -> php artisan make:controller ExampleController

23/10/25
    - @yeild('content') php2 - {{ $slot }} (bắt buộc phải là slot)
    - <x-name-MainLayout> 'Content' </x-name-MainLayout> => không cần phải extends như php2

29/10/25
    - trong cmd chạy lệnh: mysql -u root -p => để kết nối database

    - lệnh: show databases; => để xem các database có trong server

    - exit enter để thoát.

    - lệnh để chạy kết nối database: php artisan migrate

    - lệnh: php artisan migrate:fresh -> sẽ xóa toàn bộ dữ liệu trong database và các bảng không có file nằm trong base Laravel 
    
    - lệnh: php artisan make:migration nameTable lệnh này sẽ tạo thêm file định nghĩa cấu trúc bảng trong database
    
    - file migration 
        + mục đích: quản lý thay đổi cấu trúc CSDL (tạo, sửa, xóa bảng/cột)
        + có thể tạo nhiều bảng nhưng nên chỉ 1/file 
        + chạy lệnh PHP ARTISAN MIGRATE để thực thi up() và tạo bảng

30/10/25
    - CSRF | Cross-Site Request Forgery | "Giả mạo yêu cầu từ trang khác".
        + Là một kiểu tấn công mà hacker lừa người dùng gửi yêu cầu đến trang web thật mà người đó đã đăng nhập
        
        + sau khi render, Blade sẽ biến @csrf thành :
            <input type="hidden" name="_token" value="r4nd0mStr1ng123...">
        
        + Laravel tự động thêm một mã token bí mật (gọi là CSRF token) vào mọi form HTML.
    
    - Khi bạn submit form, Laravel sẽ:

        + Lấy _token từ form gửi lên,

        + So sánh với token thật đang lưu trong session của người dùng,

        + Nếu trùng → hợp lệ ✅

        + Nếu thiếu hoặc sai → lỗi ❌.
    
    - Trong form, phần confirm password => đặt name là password_confirmation, để laravel tự động tìm kiếm khi dùng hàm validate.
    
    - Truyền message vào view
        @error('input_name')
            <p class="m-0 small alert alert-danger shadow-sm">{{ $message }}</p>
        @enderror
    - Giữ các value hợp lệ: value="old('name_input')".

31/10/25
    - auth()->attempt(); thử đăng nhập user(username + password) trả về true/false 
    
    - $request->session()->regenerate(); tạo session ID mới để chống hack, vô hiệu hóa session Id cũ
    
    - $table->foreignId('user_id')->constrained(); constrained: chỉ tạo bài viết ứng với người dùng có userId tồn tại 
        trong bảng users.
    
    - $table->foreignId('users_id')->constrained()->onDelete('cascade'); 
        + onDelete: nếu bản ghi trong users bị xóa thì toàn bộ bản ghi con trong bảng posts 
            cũng bị xóa d
    
    - strip_tags: chức năng chính: Xóa tất cả các thẻ HTML và PHP khỏi một chuỗi văn bản.
    
    - $table->foreignId('user_id')->constrained()->onDelete('cascade'); constrained sẽ nhận tham số
        là tên bảng, nếu không truyền nó sẽ tự động thêm s vào cuối user loại bỏ _id.

1/11/25
    - laravel tự nối model với bảng bằng quy ước tên 
        + Tên model (số ít, PascalCase) → tên bảng (số nhiều, snake_case).
        + nếu bảng tên guest mà muốn kết nối đến bảng client thì phải dùng: 
            => protected $table = 'client';

    - dòng này: return redirect('/')->with('success','You are now logged in.');
        sẽ bắt key như thế này: 
                    @if (session()->has('success'))
                    <div class="container container--narrow">
                        <div class="alert alert-success text-center">
                            {{ session('success') }}
                        </div>
                    </div>
                    @endif

2/11/25
    - public function getUserName(){
        return $this->belongsTo(User::class, 'user_id'); 
    } 
        + tham chiếu từ bảng posts -> users, lấy ra các thuộc tính của user_id tương ứng
        + $id->getUserName->username
    
    - $id['body'] = Str::markdown($id->body); 
        => chuyển đổi văn bản markdown thành html, ví dụ: # Tiêu để => <h1>Tiêu để</h1>
        - để hiện thị trong view {!! $title !!}
    
    - khai báo một middleware mới
        1. php artisan make:middleware nameMiddleware.
        2. bootsrap -> app.php -> khai báo middleware mới

    - khai báo policy
        1. php artisan make:policy PostPplicy --mode=Post -> kết nối policy này vs bảng posts
    
    - trong policy có thể hàm để check quyền CRUD các bài post.
        Ví dụ: 
         @can('update', $idPost)
         @endcan
        => nếu điều kiện true thì có thể thực hiện hành động trong can
        1. Policy trong cotroller 
            // if(auth()->user()->cannot('delete', $idPost)){
            //     return 'You cannot do that';
            // } 
        2. Policy trong middleware
            Route::delete('post/{idPost}', [PostController::class, "delete"])->middleware('can:delete,idPost');
    - tạo thêm file migration để edit bảng
        => php artisan make:migration name_file --table=nameTable

4/11/25
    - Khai báo gate, vào Providers phần boot 
        => public function boot(): void
    {
        Gate::define('visitAdminPages', function($user){
            return $user->isAdmin === 1;
        });
    }
        => import use Illuminate\Support\Facades\Gate; trong router và Providers

    cách sử dụng:
                    Route::get('/admin-only', function(){
                        if(Gate::allows('visitAdminPages')){
                            return 'Only admins should be able to see this page';
                        }
                        return 'You can not view this page';
                    }) ;// hoặc ->middleware('can:visitAdminPages')
    
21/11
    - php artisan storage:link
        => tạo một path ảo của storage nằm trong file public, từ đó có thể truy cập ảnh trong file storage 
    từ Url.

    - upload_max_filesize (ở trong file php.ini), set value size ảnh để valid upload size.